@using TODO.PersistObject.models
@model TODO_Users
<div id="content-header">
    <h1>
        用户管理</h1>
</div>
<div id="breadcrumb">
</div>
<div class="container-fluid">
    <div class="row-fluid">
        <div class="span12">
            <div class="widget-box">
                <div class="widget-title">
                    <span class="icon"><i class="icon-align-justify"></i></span>
                    <h5>
                        修改用户</h5>
                </div>
                <div class="widget-content nopadding">
                    @using (Html.BeginForm("Edit", "User", FormMethod.Post, new { @class = "form-horizontal", id = "create" }))
                    {           
                        <div class="control-group">
                            <label class="control-label">
                                用户名:</label>
                            <div class="controls">
                                <input name="UserName" value="@Model.UserName"  type="text" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">
                                用户权限:</label>
                            <div class="controls">
                                <select id="UserRole" name="UserRole">
                                    <option value="0">普通用户</option>
                                    <option value="1">管理员</option>
                                </select>
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">
                                姓名:</label>
                            <div class="controls">
                                <input name="PersonName" value="@Model.PersonName" type="text" />
                            </div>
                        </div>
                        <div class="control-group">
                            <label class="control-label">
                                密码:</label>
                            <div class="controls">
                                <input name="Password" value="@Model.Password" type="password" />
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <label class="control-label">
                                是否启用:</label>
                            <div class="controls">
                                <input type="checkbox" id="IsAvailable" name="IsAvailable" />
                            </div>
                        </div>
                        <div class="form-actions">
                            <input type="submit" class="btn btn-primary" value="保存" />
                            <label id="msg" style="color: Red">@ViewData["ErrStr"]</label>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="@Url.Content("~/Content/js/jquery.validate.js")"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#create").validate({
            rules: {
                UserName: {
                    required: true
                },
                Password: {
                    required: true
                },
                UserName: {
                    required: true
                },
            },
            errorClass: "help-inline",
            errorElement: "span",
            highlight: function (element, errorClass, validClass) {
                $(element).parents('.control-group').addClass('error');
            },
            unhighlight: function (element, errorClass, validClass) {
                $(element).parents('.control-group').removeClass('error');
            }
        });

       
        $("#UserRole").val("@Model.UserRole");
        @if (Model.IsAvailable)
        {
            @Html.Raw("$(\"#IsAvailable\").prop('checked', true);");
        }
        $('input[type=checkbox]').uniform();
    });
</script>
